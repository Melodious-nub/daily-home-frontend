<div class="p-4">
  <h5 class="mb-3 text-center">Add New Bazar</h5>

  <form [formGroup]="bazarForm" (ngSubmit)="onSubmit()" class="bazar-form mt-4">
    <mat-form-field appearance="outline" class="w-100 mb-3">
      <mat-label>Date</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="date">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-100 mb-3">
      <mat-label>Cost</mat-label>
      <input matInput type="number" placeholder="Enter cost" formControlName="cost">
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-100 mb-3">
      <mat-label>Select Members</mat-label>
      <mat-select formControlName="members" multiple>
        <mat-option *ngFor="let member of members" [value]="member._id">
          <div class="d-flex align-items-center">
            <img [src]="member.picture || 'assets/default-user.png'" width="28" height="28"
                 style="border-radius: 50%; object-fit: cover; margin-right: 8px;">
            <span>{{ member.name }}</span>
          </div>
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Description</mat-label>
      <input matInput placeholder="What was bought?" formControlName="description">
    </mat-form-field>

    <button matButton style="background-color: #006a6a; color: white;" class="w-100" type="submit" [disabled]="loading">
      <ng-container *ngIf="!loading">Add Bazar</ng-container>
      <ng-container *ngIf="loading">
        <span class="spinner-border spinner-border-sm me-1" role="status"></span>
        Saving...
      </ng-container>
    </button>

    <button mat-stroked-button type="button" class="w-100 mt-3 mb-3" (click)="close()">Cancel</button>
  </form>
</div>